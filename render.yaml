services:
  - type: web
    name: zeroclaw-assistant
    runtime: docker
    plan: free
    envVars:  # âœ… Indented under the service
      # --- Networking ---
      - key: PORT
        value: "8080"
      - key: ZEROCLAW_GATEWAY_PORT
        value: "8081"
      - key: ZEROCLAW_GATEWAY_ALLOW_PUBLIC_BIND
        value: "true"

      # --- Primary Brain (Gemini) ---
      - key: ZEROCLAW_DEFAULT_PROVIDER
        value: "google"
      - key: ZEROCLAW_DEFAULT_MODEL
        value: "gemini-2.0-flash"
      - key: ZEROCLAW_API_KEY
        sync: false

      # --- Multi-Provider Fallback Chain ---
      - key: ZEROCLAW_RELIABILITY_FALLBACK_PROVIDERS
        value: '["groq", "openrouter", "openai"]'

      # --- Defining the Backup Models ---
      - key: ZEROCLAW_RELIABILITY_FALLBACK_MODELS
        value: '{"groq": "llama-3.3-70b-specdec", "openrouter": "anthropic/claude-3.5-sonnet", "openai": "gpt-4o-mini"}'

      # --- API Keys for All Providers ---
      - key: GROQ_API_KEY
        sync: false
      - key: OPENROUTER_API_KEY
        sync: false
      - key: OPENAI_API_KEY
        sync: false

      # --- Reliability Rules ---
      - key: ZEROCLAW_RELIABILITY_RETRIES
        value: "3"
      - key: ZEROCLAW_RELIABILITY_BACKOFF_MS
        value: "1000"

      # --- Telegram Integration ---
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: ZEROCLAW_CHANNELS_TELEGRAM_ENABLED
        value: "true"
